const e=JSON.parse('{"key":"v-f041fc84","path":"/knowledgeBase/xiaolinCoding/3.MySQL/5.lockChapter/5.html","title":"5. MySQL 死锁了，怎么办？","lang":"zh-CN","frontmatter":{"title":"5. MySQL 死锁了，怎么办？","description":"说个很早之前自己遇到过数据库死锁问题。 有个业务主要逻辑就是新增订单、修改订单、查询订单等操作。然后因为订单是不能重复的，所以当时在新增订单的时候做了幂等性校验，做法就是在新增订单记录之前，先通过 select ... for update 语句查询订单是否存在，如果不存在才插入订单记录。 而正是因为这样的操作，当业务量很大的时候，就可能会出现死锁。 接下来跟大家聊下为什么会发生死锁，以及怎么避免死锁。","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/myblogs/knowledgeBase/xiaolinCoding/3.MySQL/5.lockChapter/5.html"}],["meta",{"property":"og:site_name","content":"huamus"}],["meta",{"property":"og:title","content":"5. MySQL 死锁了，怎么办？"}],["meta",{"property":"og:description","content":"说个很早之前自己遇到过数据库死锁问题。 有个业务主要逻辑就是新增订单、修改订单、查询订单等操作。然后因为订单是不能重复的，所以当时在新增订单的时候做了幂等性校验，做法就是在新增订单记录之前，先通过 select ... for update 语句查询订单是否存在，如果不存在才插入订单记录。 而正是因为这样的操作，当业务量很大的时候，就可能会出现死锁。 接下来跟大家聊下为什么会发生死锁，以及怎么避免死锁。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-07-02T14:35:37.000Z"}],["meta",{"property":"article:author","content":"huamus"}],["meta",{"property":"article:modified_time","content":"2023-07-02T14:35:37.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"5. MySQL 死锁了，怎么办？\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-07-02T14:35:37.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"huamus\\",\\"url\\":\\"https://huamus.github.io/mynotes/\\"}]}"]]},"headers":[{"level":2,"title":"1、记录之间加有间隙锁","slug":"_1、记录之间加有间隙锁","link":"#_1、记录之间加有间隙锁","children":[]},{"level":2,"title":"2、遇到唯一键冲突","slug":"_2、遇到唯一键冲突","link":"#_2、遇到唯一键冲突","children":[{"level":3,"title":"主键索引冲突","slug":"主键索引冲突","link":"#主键索引冲突","children":[]}]}],"git":{"createdTime":1688308537000,"updatedTime":1688308537000,"contributors":[{"name":"huamus","email":"1943805462@qq.com","commits":1}]},"readingTime":{"minutes":18.17,"words":5452},"filePathRelative":"knowledgeBase/xiaolinCoding/3.MySQL/5.lockChapter/5.md","localizedDate":"2023年7月2日","excerpt":"<p>说个很早之前自己遇到过数据库死锁问题。</p>\\n<p>有个业务主要逻辑就是新增订单、修改订单、查询订单等操作。然后因为订单是不能重复的，所以当时<strong>在新增订单的时候做了幂等性校验，做法就是在新增订单记录之前，先通过</strong> <strong>select ... for update</strong> <strong>语句查询订单是否存在，如果不存在才插入订单记录。</strong></p>\\n<p>而正是因为这样的操作，当业务量很大的时候，就可能会出现死锁。</p>\\n<p>接下来跟大家聊下<strong>为什么会发生死锁，以及怎么避免死锁</strong>。</p>\\n","autoDesc":true}');export{e as data};
